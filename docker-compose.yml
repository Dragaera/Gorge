version: '3'

networks:
  gorge-dev:
  gorge-test:

services:
  database:
    image: 'postgres:9.6'
    env_file: .env.development.docker
    networks:
      - gorge-dev
    ports:
      - 15432:5432

  database-testing:
    image: 'postgres:9.6'
    env_file: .env.testing
    networks:
      - gorge-test
    ports:
      - 15433:5432

  redis:
    image: 'redis:3'
    networks:
      - gorge-dev
    ports:
      - 16379:6379

  redis-test:
    image: 'redis:3'
    networks:
      - gorge-test
    ports:
      - 26379:6379

# gorge-scheduler:
#   build: .
#   env_file: .env.development.docker
#   command: scheduler
#   networks:
#     - gorge-dev

# gorge-worker:
#   build: .
#   env_file: .env.development.docker
#   command: worker
#   networks:
#     - gorge-dev

# gorge-application:
#   build: .
#   env_file: .env.development.docker
#   command: application
#   ports:
#     - 8080:8080
#   networks:
#     - gorge-dev
